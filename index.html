<!DOCTYPE html>
<html>
  <head>
    <title>PayPal Button</title>
    <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD"></script>
  </head>
  <body>
    <div id="paypal-button-container"></div>

    <script>
      paypal.Buttons({
        createOrder: function(data, actions) {
          return fetch('https://paypal-production-ea16.up.railway.app/create-order', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            }
          }).then(res => res.json())
            .then(data => data.id);
        },
        onApprove: function(data, actions) {
          return fetch(`https://paypal-production-ea16.up.railway.app/capture-order/${data.orderID}`, {
            method: 'POST'
          }).then(res => res.json())
            .then(data => {
              alert('Payment successful!');
              console.log(data);
            });
        }
      }).render('#paypal-button-container');
    </script>
  </body>
</html>
